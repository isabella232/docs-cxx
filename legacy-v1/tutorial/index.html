<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">
<meta name="keyword" content="">

    <link rel="shortcut icon" href="https://mongodb.github.io/docs-cxx/img/favicon.png">

    <title>Legacy driver tutorial</title>

    <link rel="stylesheet" href="https://mongodb.github.io/docs-cxx/lib/bootstrap.css" type="text/css" />
<link rel="stylesheet" href="https://mongodb.github.io/docs-cxx/lib/font-awesome/css/font-awesome.min.css" type="text/css" />
<link rel="stylesheet" href="https://mongodb.github.io/docs-cxx/css/mongodb-docs.css" type="text/css" />
<link rel="stylesheet" href="https://mongodb.github.io/docs-cxx/css/overrides.css" type="text/css" />
<link rel="stylesheet" href="https://mongodb.github.io/docs-cxx/lib/highlight/styles/idea.css" />
<link rel="stylesheet" href="https://mongodb.github.io/docs-cxx/lib/bootstrap-toggle/bootstrap-toggle.min.css" type="text/css" />
<link rel="stylesheet" href="https://mongodb.github.io/docs-cxx/css/java.css" type="text/css" />


  </head>

  <body>
  
  <section id="container" class="">
      
      <header id="header-db" class="row" role="navigation">
  <div class="header-content">
    <div class="toggle-nav pull-left">
        <i class="fa fa-bars"></i>
        <div class="icon-reorder tooltips" data-original-title="Toggle Navigation" data-placement="bottom"></div>
    </div>
    
    <div class="logo pull-left">
      <a href="https://mongodb.github.io/docs-cxx/../">
        <img src="https://mongodb.github.io/docs-cxx/img/logo-mongodb-header.png",
             alt="MongoDB C++ driver" />
      </a>
    </div>
    
    <div>
<div class="nav-items pull-right">
  <a href="https://university.mongodb.com" data-toggle="tooltip" data-placement="bottom" title="Free Online Classes">MongoDB University</a>
  <a href="http://www.mongodb.org/downloads" data-toggle="tooltip" data-placement="bottom" title="Download MongoDB">Downloads</a>
  <a href="http://www.mongodb.org/get-involved" data-toggle="tooltip" data-placement="bottom" title="Get involved with MongoDB">Community</a>
  <a href="http://docs.mongodb.org" data-toggle="tooltip" data-placement="bottom" title="The MongoDB Documentation">Docs</a>
  <a href="http://blog.mongodb.org" data-toggle="tooltip" data-placement="bottom" title="The MongoDB Blog">Blog</a>
  <div id="search">
<form method="get" action="//www.google.com/search" target="_blank">
    <input type="text" name="searchQuery" size="20" value="" autocomplete="off" placeholder="Search docs">
    <input type="hidden" name="site" value="https://mongodb.github.io/docs-cxx">
    <input type="hidden" name="q" value="">
    <label for="searchQuery"><i class="fa fa-search fa-1"></i></label>
</form>
</div>

</div>
</div>

  </div>
</header>

      

      
<aside id="sidebar" class="sidebar">
    <div class="ssidebar nav-collapse">
      <div class="ssidebarwrapper">
        <h3>
          <a class="index-link" href="https://mongodb.github.io/docs-cxx">MongoDB C&#43;&#43; Driver Manual</a>
        </h3>

        
        <ul class="sidebar-menu">
          
          
          
          
          
          
          
          
          
          
          
          

          
          
            
            









  


          
            
            









  


          
            
            









  
    
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
    
      
    
  


          
            
            









  
    
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  
  
  
  
  
  
  
  

  
    
    
    
      
    
  
  


        
      
    
      
      
        
      
    
      
      
    
    
  


          
            
            









  


          
            
            









  


          
            
            









  


          
            
            









  


          
            
            









  
    
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
    
  


          

          

          
            
            
















    <li class="toctree-l1">
    <a href="/docs-cxx/mongocxx-v3/installation/">
        <i class='fa fa-check-square-o'></i>
        Installation
    </a>
  </li>


          
            
            
















    <li class="toctree-l1">
    <a href="/docs-cxx/mongocxx-v3/tutorial/">
        <i class='fa fa-lightbulb-o'></i>
        Quick start
    </a>
  </li>


          
            
            
















<li class="toctree-l1 ">
  <a href="/docs-cxx/mongocxx-v3/" class="">
      <i class='fa fa-arrow-right'></i>
      <span>mongocxx (v3)</span>
      <span class="menu-arrow fa fa-angle-right"></span>
  </a>
    <ul >
        
        
        
        
















    <li class="toctree-l2">
    <a href="/docs-cxx/mongocxx-v3/">
        
        Overview
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/docs-cxx/mongocxx-v3/installation/">
        
        Installing the mongocxx driver
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/docs-cxx/mongocxx-v3/tutorial/">
        
        Tutorial for mongocxx
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/docs-cxx/mongocxx-v3/thread-safety/">
        
        Thread safety
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/docs-cxx/mongocxx-v3/working-with-bson/">
        
        Working with BSON
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/docs-cxx/mongocxx-v3/api-abi-versioning/">
        
        API and ABI versioning
    </a>
  </li>


        
        
    </ul>
  </li>


          
            
            













  




<li class="toctree-l1  current">
  <a href="/docs-cxx/legacy-v1/" class="">
      <i class='fa fa-arrow-right'></i>
      <span>legacy (v1)</span>
      <span class="menu-arrow fa fa-angle-down"></span>
  </a>
    <ul  class="current">
        
        
        
        
















    <li class="toctree-l2">
    <a href="/docs-cxx/legacy-v1/">
        
        Overview
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/docs-cxx/legacy-v1/installation/">
        
        Installing the legacy driver
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/docs-cxx/legacy-v1/configuration/">
        
        Configuring the legacy driver
    </a>
  </li>


        
        
        
        
        













  




    <li class="toctree-l2">
    <a href="/docs-cxx/legacy-v1/tutorial/">
        
        Legacy driver tutorial
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/docs-cxx/legacy-v1/working-with-bson/">
        
        Working with BSON
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/docs-cxx/legacy-v1/breaking-changes/">
        
        Breaking changes from 26compat
    </a>
  </li>


        
        
    </ul>
  </li>


          
            
            
















    <li class="toctree-l1">
    <a href="https://mongodb.github.io/docs-cxx/api/current">
        <i class='fa fa-file-text-o'></i>
        API Documentation
    </a>
  </li>


          
            
            
















    <li class="toctree-l1">
    <a href="/docs-cxx/getting-help/">
        <i class='fa fa-question'></i>
        Getting help
    </a>
  </li>


          
            
            
















    <li class="toctree-l1">
    <a href="/docs-cxx/reporting-bugs/">
        <i class='fa fa-bug'></i>
        Reporting Bugs
    </a>
  </li>


          
            
            
















    <li class="toctree-l1">
    <a href="https://github.com/mongodb/mongo-cxx-driver/">
        <i class='fa fa-github'></i>
        Source Code
    </a>
  </li>


          
            
            
















<li class="toctree-l1 ">
  <a href="/docs-cxx/contributing/" class="">
      <i class='fa fa-pencil'></i>
      <span>Contributing</span>
      <span class="menu-arrow fa fa-angle-right"></span>
  </a>
    <ul >
        
        
        
        
















    <li class="toctree-l2">
    <a href="/docs-cxx/contributing/">
        
        Contribution Guidelines
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/docs-cxx/contributing/testing-mongocxx/">
        
        Testing the mongocxx driver
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/docs-cxx/contributing/mongocxx-release-guide/">
        
        Releasing the mongocxx driver
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/docs-cxx/contributing/testing-legacy/">
        
        Testing the legacy driver
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/docs-cxx/contributing/legacy-release-guide/">
        
        Releasing the legacy driver
    </a>
  </li>


        
        
    </ul>
  </li>


          
        </ul>
        
    </div>
  </div>
  
</aside>



      
      <section id="main-content" class="content">
          <section class="main-column pull-left">
            <div class="document">
              <div class="documentwrapper">
                <div class="bodywrapper">
                  <div class="body">


   
<a class="edit-link" href="https://github.com/mongodb/docs-cxx/blob/master/content/legacy-v1/tutorial.md" target="_blank" title="Edit legacy-v1/tutorial.md on GitHub"><i class="fa fa-pencil-square-o"></i></a>










<div class="bc">
<ul>
  
  
  
  
  
  <li><a href="/docs-cxx/legacy-v1/">legacy (v1)</a> <i class="fa fa-angle-right"></i></li>
  <li>Legacy driver tutorial</li>
</ul>
</div>




<h3 id="getting-started-with-the-legacy-c-driver">Getting started with the Legacy C++ Driver</h3>

<p>This is an introduction to usage of the MongoDB database from a C++ program.</p>

<p>NOTE: this tutorial is for the legacy and 26compat versions of the C++ driver.</p>

<p>First, install MongoDB – see the
<a href="http://docs.mongodb.org/manual/installation/">installation</a> page for
details.</p>

<p>Next, you may wish to take a look at the <a href="http://docs.mongodb.org/manual/">MongoDB
Manual</a> for a language independent look at
how to use MongoDB. Also, we suggest some basic familiarity with the <a href="http://docs.mongodb.org/manual/mongo/">mongo
shell</a> – the shell is the primary
database administration tool and is useful for manually inspecting the
contents of a database after your C++ program runs.</p>

<h3 id="installing-the-driver-library-and-headers">Installing the Driver Library and Headers</h3>

<p>Please see <a href="https://mongodb.github.io/docs-cxx/legacy-v1/installation/">Installation</a> for
instructions on how to download, build, and install the C++ client driver.</p>

<h3 id="initializing-the-driver-library">Initializing the Driver Library</h3>

<p>Please see <a href="https://mongodb.github.io/docs-cxx/legacy-v1/configuration/">Configuration</a> for
instructions on how to properly initialize and terminate the driver:</p>

<h3 id="connecting">Connecting</h3>

<h4 id="dbclientconnection">DBClientConnection</h4>

<p>The C++ driver includes several classes for managing collections under the parent class <code>DBClientInterface</code>.</p>

<ul>
<li><code>DBClientConnection</code> is the connection class for connecting to a single MongoDB database server (or mongos)</li>
<li><code>DBClientReplicaSet</code> is the connection class for connecting to a replica set.</li>
</ul>

<p>See the <a href="http://mongodb.github.io/api/1.0.2/">API documentation</a> for
details on each of the above classes.</p>

<h4 id="a-simple-program-that-connects-to-the-database">A simple program that connects to the database</h4>

<pre><code class="language-cpp">#include &lt;cstdlib&gt;
#include &lt;iostream&gt;
#include &quot;mongo/client/dbclient.h&quot; // for the driver

void run() {
  mongo::DBClientConnection c;
  c.connect(&quot;localhost&quot;);
}

int main() {
    mongo::client::initialize();
    try {
        run();
        std::cout &lt;&lt; &quot;connected ok&quot; &lt;&lt; std::endl;
    } catch( const mongo::DBException &amp;e ) {
        std::cout &lt;&lt; &quot;caught &quot; &lt;&lt; e.what() &lt;&lt; std::endl;
    }
    return EXIT_SUCCESS;
}
</code></pre>

<p>(Note that in a production environment, the return value of <code>mongo::client::initialize()</code> must be checked)</p>

<p>If you are using gcc on Linux, you would compile with something like this, depending on location of your include files and libraries:</p>

<pre><code class="language-sh">$ g++ tutorial.cpp -pthread -lmongoclient -lboost_thread-mt -lboost_system -lboost_regex -o tutorial
$ ./tutorial
connected ok
</code></pre>

<blockquote>
<p><strong>Warning</strong></p>
</blockquote>

<ul>
<li>Since the tutorial program attempts to connect to a MongoDB database server, you must start it by running mongod before running the tutorial.</li>
<li>You may need to append -mt to boost_filesystem and boost_program_options. If using a recent boost, -mt is not needed anymore.</li>
<li>You may need to use -I and -L to specify the locations of your mongo and boost headers and libraries.</li>
<li>If using the 26compat branch you need to additionally specify <code>-lboost_filesystem</code> and <code>-lboost_program_options</code></li>
</ul>

<h3 id="bson">BSON</h3>

<p>The MongoDB database stores data in BSON format. BSON is a binary object
format that is JSON-like in terms of the data which can be stored (some
extensions exist, for example, a Date datatype).</p>

<p>To save data in the database we must create objects of class BSONObj. The
components of a BSONObj are represented as BSONElement objects. We use
BSONObjBuilder to make BSON objects, and BSONObjIterator to enumerate BSON
objects.</p>

<h4 id="the-c-bson-library">The C++ BSON Library</h4>

<p>Include bson/bson.h in your application. See
<a href="https://github.com/mongodb/mongo-cxx-driver/blob/legacy/src/mongo/bson/bsondemo/bsondemo.cpp">bsondemo</a>
for example usage.</p>

<h5 id="key-classes">Key classes</h5>

<pre><code class="language-cpp">mongo::BSONObj: a BSON object
mongo::BSONElement: a single element in a BSON object. This is a key and a value.
mongo::BSONObjBuilder: used to make BSON objects
mongo::BSONObjIterator: used to enumerate BSON objects
</code></pre>

<h5 id="working-with-bson">Working with BSON</h5>

<p>Let’s now create a BSON “person” object which contains name and age. We might invoke:</p>

<pre><code class="language-cpp">BSONObjBuilder b;
b.append(&quot;name&quot;, &quot;Joe&quot;);
b.append(&quot;age&quot;, 33);
BSONObj p = b.obj();
</code></pre>

<p>Or more concisely:</p>

<pre><code class="language-cpp">BSONObj p = BSONObjBuilder().append(&quot;name&quot;, &quot;Joe&quot;).append(&quot;age&quot;, 33).obj();
</code></pre>

<p>We can also create BSON objects using the stream oriented syntax:</p>

<pre><code class="language-cpp">BSONObjBuilder b;
b &lt;&lt; &quot;name&quot; &lt;&lt; &quot;Joe&quot; &lt;&lt; &quot;age&quot; &lt;&lt; 33;
BSONObj p = b.obj();
</code></pre>

<p>The BSON Macro lets us be even more compact:</p>

<pre><code class="language-cpp">BSONObj p = BSON( &quot;name&quot; &lt;&lt; &quot;Joe&quot; &lt;&lt; &quot;age&quot; &lt;&lt; 33 );
</code></pre>

<p>Use the GENOID helper to add an object id to your object. The server will
add an _id automatically if it is not included explicitly.</p>

<pre><code class="language-cpp">BSONObj p = BSON( GENOID &lt;&lt; &quot;name&quot; &lt;&lt; &quot;Joe&quot; &lt;&lt; &quot;age&quot; &lt;&lt; 33 );
// result is: { _id : ..., name : &quot;Joe&quot;, age : 33 }
</code></pre>

<p>GENOID should be at the beginning of the generated object. We can do something similar with the non-stream builder syntax:</p>

<pre><code class="language-cpp">BSONObj p = BSONObjBuilder().genOID().append(&quot;name&quot;,&quot;Joe&quot;).append(&quot;age&quot;,33).obj();
</code></pre>

<p>Other helpers are listed in <a href="https://mongodb.github.io/docs-cxx/legacy-v1/working-with-bson/">Working with BSON</a>.</p>

<h3 id="inserting">Inserting</h3>

<p>We now save our person object in a persons collection in the database:</p>

<pre><code class="language-cpp">c.insert(&quot;tutorial.persons&quot;, p);
</code></pre>

<p>The first parameter to insert is the namespace. tutorial is the database and persons is the collection name.</p>

<h4 id="getlasterror">getLastError</h4>

<p>In order to ensure the write succeeded we need to call getLastError.</p>

<p>Get error result from the last operation on this connection:</p>

<pre><code class="language-cpp">string mongo::DBClientWithCommands::getLastError(); // Empty string if no error
</code></pre>

<p>Get the full last error object:</p>

<pre><code class="language-cpp">BSONObj DBClientWithCommands::getLastErrorDetailed();
</code></pre>

<p>For an example, see <a href="https://github.com/mongodb/mongo-cxx-driver/blob/legacy/src/mongo/client/examples/simple_client_demo.cpp">this demo</a>.</p>

<p>For additional background information on getLastError see the <a href="http://docs.mongodb.org/manual/core/write-operations/#write-concern">write
operations documentation</a>.</p>

<h3 id="count">Count</h3>

<p>Let’s now fetch all objects from the persons collection, and display them. We’ll also show here how to use count().</p>

<pre><code class="language-cpp">cout &lt;&lt; &quot;count:&quot; &lt;&lt; c.count(&quot;tutorial.persons&quot;) &lt;&lt; endl;
</code></pre>

<h3 id="query">Query</h3>

<pre><code class="language-cpp">auto_ptr&lt;DBClientCursor&gt; cursor = c.query(&quot;tutorial.persons&quot;, BSONObj());

while (cursor-&gt;more())
   cout &lt;&lt; cursor-&gt;next().toString() &lt;&lt; endl;
</code></pre>

<p><code>BSONObj()</code> is an empty BSON object – it represents <code>{}</code> which indicates an
empty query pattern (an empty query is a query for all objects).</p>

<p>We use <code>BSONObj::toString()</code> above to print out information about each
object retrieved. <code>BSONObj::toString</code> is a diagnostic function which prints
an abbreviated JSON string representation of the object. For full JSON
output, use <code>BSONObj::jsonString</code>.</p>

<p>Let’s now write a function which prints out the name (only) of all persons
in the collection whose age is a given value:</p>

<pre><code class="language-cpp">void printIfAge(DBClientConnection&amp; c, int age) {
    auto_ptr&lt;DBClientCursor&gt; cursor =
        c.query(&quot;tutorial.persons&quot;, MONGO_QUERY(&quot;age&quot; &lt;&lt; age));
    while (cursor-&gt;more()) {
        BSONObj p = cursor-&gt;next();
        cout &lt;&lt; p.getStringField(&quot;name&quot;) &lt;&lt; endl;
    }
}
</code></pre>

<p><code>getStringField()</code> is a helper that assumes the name field is of type
string. To manipulate an element in a more generic fashion we can retrieve
the particular BSONElement from the enclosing object:</p>

<pre><code class="language-cpp">BSONElement name = p[&quot;name&quot;];
// or:
BSONElement name = p.getField(&quot;name&quot;);
</code></pre>

<p>See the api docs, and jsobj.h, for more information.</p>

<p>Our query above, written as JSON, is of the form</p>

<p><code>{ age : &lt;agevalue&gt; }</code></p>

<p>Queries are BSON objects of a particular format – in fact, we could have
used the BSON() macro above instead of MONGO_QUERY(). See class Query in
dbclient.h for more information on Query objects, and the Sorting section
below.</p>

<p>In the mongo shell (which uses javascript), we could invoke:</p>

<pre><code class="language-js">use tutorial;
db.persons.find({age : 33});
</code></pre>

<h3 id="indexing">Indexing</h3>

<p>Let’s suppose we want to have an index on age so that our queries are fast. We would use:</p>

<pre><code class="language-cpp">c.createIndex(&quot;tutorial.persons&quot;, fromjson(&quot;{age:1}&quot;));
</code></pre>

<p>In the above example we use a new function, fromjson. fromjson converts a
JSON string to a BSONObj. This is sometimes a convenient way to specify
BSON. Alternatively, we could have written:</p>

<pre><code class="language-cpp">c.createIndex(&quot;tutorial.persons&quot;, BSON( &quot;age&quot; &lt;&lt; 1 ));
</code></pre>

<p>While calling createIndex multiple times won&rsquo;t result in duplicate index
creation on the server, it will cause an extra network round-trip and
server operation for each call. It&rsquo;s best practice to use this method
sparingly, for example once at the beginning of your code, or perhaps in an
external setup script that configures the database for your application.
For more information about indexing, see the <a href="http://docs.mongodb.org/manual/indexes/">MongoDB Indexing
docs</a>.</p>

<h3 id="sorting">Sorting</h3>

<p>Let’s now make the results from printIfAge sorted alphabetically by name.
To do this, we change the query statement from:</p>

<pre><code class="language-cpp">auto_ptr&lt;DBClientCursor&gt; cursor = c.query(&quot;tutorial.persons&quot;, MONGO_QUERY(&quot;age&quot; &lt;&lt; age));
</code></pre>

<p>to</p>

<pre><code class="language-cpp">auto_ptr&lt;DBClientCursor&gt; cursor = c.query(&quot;tutorial.persons&quot;, MONGO_QUERY(&quot;age&quot; &lt;&lt; age ).sort(&quot;name&quot;));
</code></pre>

<p>Here we have used <code>Query::sort()</code> to add a modifier to our query expression for sorting.</p>

<h3 id="updating">Updating</h3>

<p>Use the <code>update()</code> method to perform a database update. For example the
following update in the mongo shell:</p>

<pre><code class="language-js">&gt; use tutorial
&gt; db.persons.update( 
    { name : 'Joe', age : 33 },
    { $inc : { visits : 1 } }
)
</code></pre>

<p>is equivalent to the following C++ code:</p>

<pre><code class="language-cpp">db.update(&quot;tutorial.persons&quot;,
    BSON(&quot;name&quot; &lt;&lt; &quot;Joe&quot; &lt;&lt; &quot;age&quot; &lt;&lt; 33),
    BSON(&quot;$inc&quot; &lt;&lt; BSON( &quot;visits&quot; &lt;&lt; 1))
);
</code></pre>

<p>The <code>update()</code> method can be used to modify specific fields, replace the
entire existing document, insert new documents or update multiple
documents.  In the MongoDB Manual, examples are provided in the <a href="http://docs.mongodb.org/manual/tutorial/modify-documents/">Modify
Documents Tutorial</a>.</p>

<h3 id="arrays">Arrays</h3>

<p>A simple example illustrating usage of BSON arrays and the <code>$nin</code> operator
is available <a href="https://github.com/mongodb/mongo-cxx-driver/blob/legacy/src/mongo/client/examples/arrayExample.cpp">here</a>.</p>

<h3 id="further-reading">Further Reading</h3>

<p>This overview just touches on the basics of using MongoDB from C++. There
are many more capabilities. For further exploration:</p>

<ul>
<li>See the language-independent <a href="http://docs.mongodb.org/manual/">MongoDB Manual</a></li>
<li>Experiment with the <a href="http://docs.mongodb.org/manual/mongo/">mongo shell</a></li>
<li>Review the <a href="http://mongodb.github.io/api/1.0.2">API docs</a></li>
</ul>






<div id="btnv">
  
  <div class="pull-left">
  <a class="navigation prev" href="/docs-cxx/legacy-v1/configuration/">
      <i class="fa fa-long-arrow-left"> </i> Configuring the legacy driver
  </a>
  </div>
  
  
  <div class="pull-right">
  <a class="navigation next" href="/docs-cxx/legacy-v1/working-with-bson/">
    Working with BSON <i class="fa fa-long-arrow-right"> </i>
  </a>
  
</div>
</div>


</div>
<div class="right-column">
<div class="wrapper">
  
  <div class="toc">
    <span class="toc-header">On this page</span>
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#getting-started-with-the-legacy-c-driver">Getting started with the Legacy C++ Driver</a></li>
<li><a href="#installing-the-driver-library-and-headers">Installing the Driver Library and Headers</a></li>
<li><a href="#initializing-the-driver-library">Initializing the Driver Library</a></li>
<li><a href="#connecting">Connecting</a>
<ul>
<li><a href="#dbclientconnection">DBClientConnection</a></li>
<li><a href="#a-simple-program-that-connects-to-the-database">A simple program that connects to the database</a></li>
</ul></li>
<li><a href="#bson">BSON</a>
<ul>
<li><a href="#the-c-bson-library">The C++ BSON Library</a>
<ul>
<li><a href="#key-classes">Key classes</a></li>
<li><a href="#working-with-bson">Working with BSON</a></li>
</ul></li>
</ul></li>
<li><a href="#inserting">Inserting</a>
<ul>
<li><a href="#getlasterror">getLastError</a></li>
</ul></li>
<li><a href="#count">Count</a></li>
<li><a href="#query">Query</a></li>
<li><a href="#indexing">Indexing</a></li>
<li><a href="#sorting">Sorting</a></li>
<li><a href="#updating">Updating</a></li>
<li><a href="#arrays">Arrays</a></li>
<li><a href="#further-reading">Further Reading</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
  </div>
  
</div>
</div>

</div>
</div>
</div>
</section>
</section>

</section>


<script type="text/javascript">
  var DOCUMENTATION_OPTIONS = {
   URL_ROOT:    "https://mongodb.github.io/docs-cxx",
   VERSION:     "",
   COLLAPSE_INDEX: false,
   FILE_SUFFIX: '.html',
   HAS_SOURCE:  true
  };
</script>
<script type="text/javascript" src="https://mongodb.github.io/docs-cxx/js/jquery.js"></script>
<script type="text/javascript" src="https://mongodb.github.io/docs-cxx/lib/bootstrap.js"></script>
<script type="text/javascript" src="https://mongodb.github.io/docs-cxx/js/navbar.js"></script>
<script type="text/javascript" src="https://mongodb.github.io/docs-cxx/lib/highlight/highlight.pack.js"></script>
<script type="text/javascript" src="https://mongodb.github.io/docs-cxx/js/scripts.js"></script>
<script type="text/javascript" src="https://mongodb.github.io/docs-cxx/lib/bootstrap-toggle/bootstrap-toggle.min.js"></script>



<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-K75Z5Q"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push(
{'gtm.start': new Date().getTime(),event:'gtm.js'}
);var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-K75Z5Q');</script>


<script type="text/javascript">
var _elqQ = _elqQ || [];
_elqQ.push(['elqSetSiteId', '413370795']);
_elqQ.push(['elqTrackPageView']);
(function () {
function async_load()
{ var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = '//img03.en25.com/i/elqCfg.min.js'; var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x); }
if (window.addEventListener) window.addEventListener('DOMContentLoaded', async_load, false);
else if (window.attachEvent) window.attachEvent('onload', async_load);
})();
</script>

</body>
</html>

