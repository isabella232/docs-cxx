<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">
<meta name="keyword" content="">

    <link rel="shortcut icon" href="https://mongodb.github.io/docs-cxx/img/favicon.png">

    <title>Installing the mongocxx driver</title>

    <link rel="stylesheet" href="https://mongodb.github.io/docs-cxx/lib/bootstrap.css" type="text/css" />
<link rel="stylesheet" href="https://mongodb.github.io/docs-cxx/lib/font-awesome/css/font-awesome.min.css" type="text/css" />
<link rel="stylesheet" href="https://mongodb.github.io/docs-cxx/css/mongodb-docs.css" type="text/css" />
<link rel="stylesheet" href="https://mongodb.github.io/docs-cxx/css/overrides.css" type="text/css" />
<link rel="stylesheet" href="https://mongodb.github.io/docs-cxx/lib/highlight/styles/idea.css" />
<link rel="stylesheet" href="https://mongodb.github.io/docs-cxx/lib/bootstrap-toggle/bootstrap-toggle.min.css" type="text/css" />
<link rel="stylesheet" href="https://mongodb.github.io/docs-cxx/css/java.css" type="text/css" />


  </head>

  <body>
  
  <section id="container" class="">
      
      <header id="header-db" class="row" role="navigation">
  <div class="header-content">
    <div class="toggle-nav pull-left">
        <i class="fa fa-bars"></i>
        <div class="icon-reorder tooltips" data-original-title="Toggle Navigation" data-placement="bottom"></div>
    </div>
    
    <div class="logo pull-left">
      <a href="https://mongodb.github.io/docs-cxx/../">
        <img src="https://mongodb.github.io/docs-cxx/img/logo-mongodb-header.png",
             alt="MongoDB C++ driver" />
      </a>
    </div>
    
    <div>
<div class="nav-items pull-right">
  <a href="https://university.mongodb.com" data-toggle="tooltip" data-placement="bottom" title="Free Online Classes">MongoDB University</a>
  <a href="http://www.mongodb.org/downloads" data-toggle="tooltip" data-placement="bottom" title="Download MongoDB">Downloads</a>
  <a href="http://www.mongodb.org/get-involved" data-toggle="tooltip" data-placement="bottom" title="Get involved with MongoDB">Community</a>
  <a href="http://docs.mongodb.org" data-toggle="tooltip" data-placement="bottom" title="The MongoDB Documentation">Docs</a>
  <a href="http://blog.mongodb.org" data-toggle="tooltip" data-placement="bottom" title="The MongoDB Blog">Blog</a>
  <div id="search">
<form method="get" action="//www.google.com/search" target="_blank">
    <input type="text" name="searchQuery" size="20" value="" autocomplete="off" placeholder="Search docs">
    <input type="hidden" name="site" value="https://mongodb.github.io/docs-cxx">
    <input type="hidden" name="q" value="">
    <label for="searchQuery"><i class="fa fa-search fa-1"></i></label>
</form>
</div>

</div>
</div>

  </div>
</header>

      

      
<aside id="sidebar" class="sidebar">
    <div class="ssidebar nav-collapse">
      <div class="ssidebarwrapper">
        <h3>
          <a class="index-link" href="https://mongodb.github.io/docs-cxx">MongoDB C&#43;&#43; Driver Manual</a>
        </h3>

        
        <ul class="sidebar-menu">
          
          
          
          
          
          
          
          
          
          
          
          

          
          
            
            









  


          
            
            









  


          
            
            









  
    
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  
  
  
  
  
  
  
  

  
    
    
    
  
  


        
      
    
      
      
        
      
    
      
      
    
      
      
    
      
      
    
    
  


          
            
            









  
    
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
    
  


          
            
            









  


          
            
            









  


          
            
            









  


          
            
            









  


          
            
            









  
    
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
    
  


          

          

          
            
            
















    <li class="toctree-l1">
    <a href="/docs-cxx/mongocxx-v3/installation/">
        <i class='fa fa-check-square-o'></i>
        Installation
    </a>
  </li>


          
            
            
















    <li class="toctree-l1">
    <a href="/docs-cxx/mongocxx-v3/tutorial/">
        <i class='fa fa-lightbulb-o'></i>
        Quick start
    </a>
  </li>


          
            
            













  




<li class="toctree-l1  current">
  <a href="/docs-cxx/mongocxx-v3/" class="">
      <i class='fa fa-arrow-right'></i>
      <span>mongocxx (v3)</span>
      <span class="menu-arrow fa fa-angle-down"></span>
  </a>
    <ul  class="current">
        
        
        
        
















    <li class="toctree-l2">
    <a href="/docs-cxx/mongocxx-v3/">
        
        Overview
    </a>
  </li>


        
        
        
        
        













  




    <li class="toctree-l2">
    <a href="/docs-cxx/mongocxx-v3/installation/">
        
        Installing the mongocxx driver
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/docs-cxx/mongocxx-v3/tutorial/">
        
        Tutorial for mongocxx
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/docs-cxx/mongocxx-v3/thread-safety/">
        
        Thread safety
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/docs-cxx/mongocxx-v3/working-with-bson/">
        
        Working with BSON
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/docs-cxx/mongocxx-v3/api-abi-versioning/">
        
        API and ABI versioning
    </a>
  </li>


        
        
    </ul>
  </li>


          
            
            
















<li class="toctree-l1 ">
  <a href="/docs-cxx/legacy-v1/" class="">
      <i class='fa fa-arrow-right'></i>
      <span>legacy (v1)</span>
      <span class="menu-arrow fa fa-angle-right"></span>
  </a>
    <ul >
        
        
        
        
















    <li class="toctree-l2">
    <a href="/docs-cxx/legacy-v1/">
        
        Overview
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/docs-cxx/legacy-v1/installation/">
        
        Installing the legacy driver
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/docs-cxx/legacy-v1/configuration/">
        
        Configuring the legacy driver
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/docs-cxx/legacy-v1/tutorial/">
        
        Legacy driver tutorial
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/docs-cxx/legacy-v1/working-with-bson/">
        
        Working with BSON
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/docs-cxx/legacy-v1/breaking-changes/">
        
        Breaking changes from 26compat
    </a>
  </li>


        
        
    </ul>
  </li>


          
            
            
















    <li class="toctree-l1">
    <a href="https://mongodb.github.io/docs-cxx/api/current">
        <i class='fa fa-file-text-o'></i>
        API Documentation
    </a>
  </li>


          
            
            
















    <li class="toctree-l1">
    <a href="/docs-cxx/getting-help/">
        <i class='fa fa-question'></i>
        Getting help
    </a>
  </li>


          
            
            
















    <li class="toctree-l1">
    <a href="/docs-cxx/reporting-bugs/">
        <i class='fa fa-bug'></i>
        Reporting Bugs
    </a>
  </li>


          
            
            
















    <li class="toctree-l1">
    <a href="https://github.com/mongodb/mongo-cxx-driver/">
        <i class='fa fa-github'></i>
        Source Code
    </a>
  </li>


          
            
            
















<li class="toctree-l1 ">
  <a href="/docs-cxx/contributing/" class="">
      <i class='fa fa-pencil'></i>
      <span>Contributing</span>
      <span class="menu-arrow fa fa-angle-right"></span>
  </a>
    <ul >
        
        
        
        
















    <li class="toctree-l2">
    <a href="/docs-cxx/contributing/">
        
        Contribution Guidelines
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/docs-cxx/contributing/testing-mongocxx/">
        
        Testing the mongocxx driver
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/docs-cxx/contributing/mongocxx-release-guide/">
        
        Releasing the mongocxx driver
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/docs-cxx/contributing/testing-legacy/">
        
        Testing the legacy driver
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/docs-cxx/contributing/legacy-release-guide/">
        
        Releasing the legacy driver
    </a>
  </li>


        
        
    </ul>
  </li>


          
        </ul>
        
    </div>
  </div>
  
</aside>



      
      <section id="main-content" class="content">
          <section class="main-column pull-left">
            <div class="document">
              <div class="documentwrapper">
                <div class="bodywrapper">
                  <div class="body">


   
<a class="edit-link" href="https://github.com/mongodb/docs-cxx/blob/master/content/mongocxx-v3/installation.md" target="_blank" title="Edit mongocxx-v3/installation.md on GitHub"><i class="fa fa-pencil-square-o"></i></a>










<div class="bc">
<ul>
  
  
  
  
  
  <li><a href="/docs-cxx/mongocxx-v3/">mongocxx (v3)</a> <i class="fa fa-angle-right"></i></li>
  <li>Installing the mongocxx driver</li>
</ul>
</div>




<h2 id="installing-the-mongocxx-driver">Installing the mongocxx driver</h2>

<h3 id="prerequisites">Prerequisites</h3>

<ul>
<li>Any standard Unix platform, or Windows 7 SP1+</li>
<li>GCC 4.8.2+, Clang 3.5+, Apple Clang 5.1+, or Visual Studio C++ 2015
Update 1 or later</li>
<li>CMake 3.2 or later</li>
<li>On Windows, boost 1.56 or later</li>
</ul>

<h3 id="installation">Installation</h3>

<h4 id="step-1-install-the-latest-version-of-the-mongodb-c-driver">Step 1: Install the latest version of the MongoDB C driver.</h4>

<p>The mongocxx driver builds on top of the MongoDB C driver.</p>

<p>Follow the instructions at
<a href="http://mongoc.org/libmongoc/current/installing.html">Installing libmongoc</a>.</p>

<h4 id="step-2-choose-a-c-17-polyfill">Step 2: Choose a C++17 polyfill</h4>

<p>The mongocxx driver uses the experimental C++17 features
<code>std::optional</code> and <code>std::string_view</code>. To compile
the mongocxx driver, you must choose one of the following
implementations for these features:</p>

<p>MNMLSTC/core (<em>default for non-Windows platforms</em>)
     Select with <code>-DBSONCXX_POLY_USE_MNMLSTC=1</code>. This option vendors a
     header-only installation of MNMLSTC/core into the bsoncxx library
     installation.</p>

<p>Boost (<em>default for Windows platforms</em>)
     Select with <code>-DBSONCXX_POLY_USE_BOOST=1</code>. This is currently the
     only option if you are using MSVC.</p>

<p><code>std::experimental</code>
     Select with <code>-DBSONCXX_POLY_USE_STD_EXPERIMENTAL=1</code>. If your
     toolchain&rsquo;s standard library provides <code>optional</code> and
     <code>string_view</code> in the namespace <code>std::experimental</code>, you can use
     this option.</p>

<p>Most users should be fine sticking with the default. However, if you
have an existing application which makes heavy use of one of the
available libraries, you may prefer to build the mongocxx driver
against the same library.</p>

<p><strong>DO NOT</strong> change your project&rsquo;s polyfill if you need to create a
stable binary interface.</p>

<p>Be aware that your standard library&rsquo;s <code>std::experimental</code> implementation
may change over time, breaking binary compatibility in unexpected ways.</p>

<h4 id="step-3-download-and-install-the-latest-version-of-the-mongocxx-driver">Step 3: Download and install the latest version of the mongocxx driver.</h4>

<pre><code class="language-sh">curl -OL https://github.com/mongodb/mongo-cxx-driver/archive/r3.0.1.tar.gz
tar -xzf r3.0.1.tar.gz
cd mongo-cxx-driver-r3.0.1/build
cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/usr/local ..
make &amp;&amp; sudo make install
</code></pre>

<p>If you did not install the MongoDB C driver into the default path,
substitute the <code>cmake</code> line above with the following:</p>

<pre><code class="language-sh">PKG_CONFIG_PATH=CDRIVER_INSTALL_PATH/lib/pkgconfig \
  cmake -DCMAKE_BUILD_TYPE=Release \
        -DCMAKE_INSTALL_PREFIX=CXXDRIVER-INSTALL-PATH ..
</code></pre>

<p>To select a polyfill, pass the option to <code>cmake</code>. For example,
to select the Boost polyfill, substitute the <code>cmake</code> line with
the following:</p>

<pre><code class="language-sh">cmake -DCMAKE_BUILD_TYPE=Release -DBSONCXX_POLY_USE_BOOST=1 ..
</code></pre>

<h4 id="step-4-test-your-installation">Step 4: Test your installation</h4>

<p>Save the following source file with the filename <code>test.cpp</code>
underneath any directory:</p>

<pre><code class="language-c++">#include &lt;iostream&gt;

#include &lt;bsoncxx/builder/stream/document.hpp&gt;
#include &lt;bsoncxx/json.hpp&gt;

#include &lt;mongocxx/client.hpp&gt;
#include &lt;mongocxx/instance.hpp&gt;

int main(int, char**) {
    mongocxx::instance inst{};
    mongocxx::client conn{mongocxx::uri{}};

    bsoncxx::builder::stream::document document{};

    auto collection = conn[&quot;testdb&quot;][&quot;testcollection&quot;];
    document &lt;&lt; &quot;hello&quot; &lt;&lt; &quot;world&quot;;

    collection.insert_one(document.view());
    auto cursor = collection.find({});

    for (auto&amp;&amp; doc : cursor) {
        std::cout &lt;&lt; bsoncxx::to_json(doc) &lt;&lt; std::endl;
    }
}
</code></pre>

<p>Compile the test program with the following command:</p>

<pre><code class="language-sh">c++ --std=c++11 test.cpp -o test $(pkg-config --cflags --libs libmongocxx)
</code></pre>






<div id="btnv">
  
  <div class="pull-left">
  <a class="navigation prev" href="/docs-cxx/mongocxx-v3/">
      <i class="fa fa-long-arrow-left"> </i> Overview
  </a>
  </div>
  
  
  <div class="pull-right">
  <a class="navigation next" href="/docs-cxx/mongocxx-v3/tutorial/">
    Tutorial for mongocxx <i class="fa fa-long-arrow-right"> </i>
  </a>
  
</div>
</div>


</div>
<div class="right-column">
<div class="wrapper">
  
  <div class="toc">
    <span class="toc-header">On this page</span>
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#installing-the-mongocxx-driver">Installing the mongocxx driver</a>
<ul>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#installation">Installation</a>
<ul>
<li><a href="#step-1-install-the-latest-version-of-the-mongodb-c-driver">Step 1: Install the latest version of the MongoDB C driver.</a></li>
<li><a href="#step-2-choose-a-c-17-polyfill">Step 2: Choose a C++17 polyfill</a></li>
<li><a href="#step-3-download-and-install-the-latest-version-of-the-mongocxx-driver">Step 3: Download and install the latest version of the mongocxx driver.</a></li>
<li><a href="#step-4-test-your-installation">Step 4: Test your installation</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</nav>
  </div>
  
</div>
</div>

</div>
</div>
</div>
</section>
</section>

</section>


<script type="text/javascript">
  var DOCUMENTATION_OPTIONS = {
   URL_ROOT:    "https://mongodb.github.io/docs-cxx",
   VERSION:     "",
   COLLAPSE_INDEX: false,
   FILE_SUFFIX: '.html',
   HAS_SOURCE:  true
  };
</script>
<script type="text/javascript" src="https://mongodb.github.io/docs-cxx/js/jquery.js"></script>
<script type="text/javascript" src="https://mongodb.github.io/docs-cxx/lib/bootstrap.js"></script>
<script type="text/javascript" src="https://mongodb.github.io/docs-cxx/js/navbar.js"></script>
<script type="text/javascript" src="https://mongodb.github.io/docs-cxx/lib/highlight/highlight.pack.js"></script>
<script type="text/javascript" src="https://mongodb.github.io/docs-cxx/js/scripts.js"></script>
<script type="text/javascript" src="https://mongodb.github.io/docs-cxx/lib/bootstrap-toggle/bootstrap-toggle.min.js"></script>



<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-K75Z5Q"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push(
{'gtm.start': new Date().getTime(),event:'gtm.js'}
);var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-K75Z5Q');</script>


<script type="text/javascript">
var _elqQ = _elqQ || [];
_elqQ.push(['elqSetSiteId', '413370795']);
_elqQ.push(['elqTrackPageView']);
(function () {
function async_load()
{ var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = '//img03.en25.com/i/elqCfg.min.js'; var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x); }
if (window.addEventListener) window.addEventListener('DOMContentLoaded', async_load, false);
else if (window.attachEvent) window.attachEvent('onload', async_load);
})();
</script>

</body>
</html>

